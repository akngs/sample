---
description: Development practices to follow
globs: src/**/*.rs
alwaysApply: false
---
Follow these rules when you edit source files:

- Before adding new functionality, refactor current code first (if necessary) and then add unit tests. After that, you can add new functionality.
- Prefer pure functions and add tests to cover them.
- Always run `rustfmt`, `clippy`, and `test` after changing the code.

Commit message should follow this form:

```
Short (72 chars or less) summary

More detailed explanatory text. Wrap it to 72 characters. The blank
line separating the summary from the body is critical (unless you omit
the body entirely).

Write your commit message in the imperative: "Fix bug" and not "Fixed
bug" or "Fixes bug." This convention matches up with commit messages
generated by commands like git merge and git revert.

Further paragraphs come after blank lines.

- Bullet points are okay, too.
- Typically a hyphen or asterisk is used for the bullet, followed by a
  single space. Use a hanging indent.
```

Testing:

- Write tests first (TDD when possible)
- Keep functions small and focused
- Use meaningful variable and function names
- Run tests frequently
- Test both success and error cases
- Use meaningful test descriptions
- Keep test files close to implementation

Misc.

- Always keep documents and comments in sync with the code.
